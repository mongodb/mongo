load("//bazel/resmoke:resmoke.bzl", "resmoke_suite_test")

resmoke_suite_test(
    name = "no_passthrough",
    srcs = [
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:aggregation_backup_cursor.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_cursor_checkpoint_recovery.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_cursor_checkpoint_timestamp.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_cursor_collection_agg.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_cursor_drop_pending_ident.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_abort_and_start_index_build.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_commit_index_build.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_index_build.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_metadata.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_unreplicated_collections.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups:backup_restore_untimestamped_writes.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/encryption:encrypt_backup_cursor.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/encryption:encrypt_incremental_backup_cursor.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/encryption:full_hot_backup_restore.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/incremental_backup:incremental_backup_cursor.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/incremental_backup:incremental_backup_cursor_ns_uuid.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/incremental_backup:incremental_backup_cursor_ns_uuid_simple.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:backup_cursor_helpers.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:incremental_backup_helpers.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:magic_restore_passthrough_runner.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:magic_restore_test.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:sharded_backup_restore.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/libs:sharded_magic_restore_test.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/magic_restore:ignore_dbcheck_in_magic_restore.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/magic_restore:magic_restore_non_pit_retryable_write_replica_set.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/magic_restore:magic_restore_non_pit_txn_replica_set.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/magic_restore:magic_restore_pit_retryable_write_replica_set.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/magic_restore:magic_restore_pit_txn_replica_set.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/selective_backup_restore:selective_backup_restore_missing_index.js",
        "//src/mongo/db/modules/enterprise/jstests/hot_backups/selective_backup_restore:selective_backup_restore_removes_catalog_entries.js",
    ],
    config = "//buildscripts/resmokeconfig:suites/no_passthrough.yml",
    data = [
        "//buildscripts/resmokeconfig:common_jstest_data",
        "//jstests/core/txns/libs:prepare_helpers.js",
        "//jstests/disk/libs:wt_file_helper.js",
        "//jstests/noPassthrough/libs:all_subpackage_javascript_files",
        "//jstests/replsets:rslib.js",
        "//jstests/replsets/libs:dbcheck_utils.js",
        "//jstests/sharding/libs:find_chunks_util.js",
        "//src/mongo/db/modules/enterprise/jstests/encryptdb/libs:all_javascript_files",
        "//src/mongo/db/modules/enterprise/jstests/encryptdb/libs:ekf",
        "//src/mongo/db/modules/enterprise/jstests/live_restore/libs:live_restore_helpers.js",
    ],
    resmoke_args = ["--runAllFeatureFlagTests"],
    tags = [
        "ci-development-critical-single-variant",
        "server-integration-smoke",
    ],
    deps = [
        "//src/mongo/db:mongod",
        "//src/mongo/shell:mongo",
        "//src/third_party/wiredtiger:wt",
    ],
)
